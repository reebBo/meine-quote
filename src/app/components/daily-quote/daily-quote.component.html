<div
  class="quote-container d-flex justify-content-center align-items-center min-vh-100"
>
  <!-- share + dev toggle -->
  <div class="d-flex justify-content-between align-items-center pb-3">
    <div *ngIf="isDevMode">
      <button
        class="btn btn-sm btn-outline-secondary"
        type="button"
        (click)="toggleQuoteSource()"
      >
        {{ useLocalQuotes ? 'Use API quotes' : 'Use local JSON quotes' }}
      </button>
    </div>
    <app-share-button
      [quote]="currentQuote$ | async"
      [offsetDays]="quoteOffsetDays"
    ></app-share-button>
  </div>
  <!-- quote -->
  <div class="block-text w-100 mt-5 p-5 bg-transparent">
    <div *ngIf="loading$ | async" class="loading-container">
      <div class="spinner"></div>
      <p>Loading quotes...</p>
    </div>

    <div *ngIf="!(loading$ | async) && (error$ | async)" class="error-message">
      <p>Couldn’t load today’s quote. Please check your connection and try again.</p>
      <button
        class="btn btn-outline-secondary retry-button"
        type="button"
        (click)="retryLoadQuotes()"
        [disabled]="loading$ | async"
      >
        Retry
      </button>
    </div>

    <ng-container *ngIf="!(error$ | async)">
      <div class="share-card" data-share-card>
        <div *ngIf="currentQuote$ | async as quote" class="share-card__inner">
          <div class="share-card__label">{{ getOffsetLabel() }}</div>
          <div class="share-card__quote">{{ quote.quoteText }}</div>
          <div class="share-card__author">
            {{ quote.quoteAuthor || 'Unknown' }}
          </div>
        </div>
      </div>
      <div *ngIf="currentQuote$ | async as quote; else noQuote">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <button
            class="btn btn-sm btn-outline-secondary"
            type="button"
            (click)="goToPreviousQuote()"
            [disabled]="quoteOffsetDays >= 5"
            aria-label="Show previous quote"
          >
            ←
          </button>
          <div class="small neutral-text">{{ getOffsetLabel() }}</div>
          <button
            class="btn btn-sm btn-outline-secondary"
            type="button"
            (click)="goToNextQuote()"
            [disabled]="quoteOffsetDays <= 0"
            aria-label="Show next quote"
          >
            →
          </button>
        </div>
        <div #quoteCapture class="quote-capture">
          <h2 class="text-body text-end shiny-text">
            {{ quote.quoteText }}
          </h2>
          <h6 class="text-end mt-2 neutral-text">
            {{ quote.quoteAuthor || 'Unknown' }}
          </h6>
        </div>
      </div>
      <ng-template #noQuote>
        <p class="neutral-text text-center">No quote available yet.</p>
      </ng-template>
    </ng-container>
  </div>
</div>
 
